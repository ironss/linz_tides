#! /usr/bin/lua5.1

local ports = require('linz_ports')
local tides = require('linz_tides')

--tides.erase_tables()
--ports.erase_tables()
--ports.create_tables()
--ports.populate_tables('secondaryports2013-14.csv')

--tides.erase_tables()
--tides.create_tables()

tidefiles={
--   'data/nelson-2013.csv',
--   'data/nelson-2014.csv',
--   'data/nelson-2015.csv',
--   'data/lyttelton-2013.csv',
--   'data/lyttelton-2014.csv',
--   'data/lyttelton-2015.csv',
--   'data/marsden_point-2013.csv',
--   'data/marsden_point-2014.csv',
--   'data/marsden_point-2015.csv',
}

secondary_ports = {
   'Astrolabe Roadstead',
   'Kaiteriteri',
   'Motueka',
   
   'Doves Bay',
   'Kerikeri',
   'Opua',
   'Russell',
   'Waitangi',
   
   'Sumner',
   'French Bay - Akaroa',
   'Tikao Bay',
}


local primary_events={}
for _, filename in ipairs(tidefiles) do
   tides.populate_tables(filename, primary_events)
end

--[[
local all_events = {}
for _, v in ipairs(primary_events) do
   all_events[#all_events+1] = v
end

for _, v in ipairs(secondary_ports) do
   tides.calculate_secondary_events(primary_events, v, all_events)
end

tides.print_events(all_events, 'NZST')
--]]
